---
import { siteConfig } from "../config";
---

<div
  id="hero"
  class="relative isolate overflow-hidden bg-white py-24 md:h-screen"
  style={`--accent-color: ${siteConfig.accentColor}`}
>
  <!-- // Gradient overlay
  <div
    class="absolute inset-0 -z-10"
    style={`background: radial-gradient(ellipse 800px 1200px at 0% 0%, ${siteConfig.accentColor}20 0%, ${siteConfig.accentColor}15 20%, ${siteConfig.accentColor}08 40%, rgba(255, 255, 255, 0.5) 70%, rgba(255, 255, 255, 0.9) 90%, white 100%)`}
  >
  </div>
  // test -->
  <svg
    aria-hidden="true"
    class="absolute inset-0 -z-10 size-full stroke-gray-200 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]"
  >
    <defs>
      <pattern
        x="50%"
        y={-1}
        id="0787a7c5-978c-4f66-83c7-11c213f99cb7"
        width={200}
        height={200}
        patternUnits="userSpaceOnUse"
      >
        <path d="M.5 200V.5H200" fill="none"></path>
      </pattern>
      <pattern
        id="programming-symbols"
        x="0"
        y="0"
        width="400"
        height="400"
        patternUnits="userSpaceOnUse"
      >
        <!-- Symbols rendered dynamically via JavaScript for interactivity -->
      </pattern>
    </defs>
    <rect
      fill="url(#0787a7c5-978c-4f66-83c7-11c213f99cb7)"
      width="100%"
      height="100%"
      stroke-width={0}></rect>
    <g id="dynamic-symbols" opacity="0.9"></g>
  </svg>
  <div class="h-full mx-auto p-8 sm:p-12 md:p-24 flex items-center">
    <div>
      <h2
        class="text-pretty text-xl sm:text-2xl md:text-5xl font-bold tracking-tight text-gray-700 animate-fade-in"
      >
        Hello! ðŸ‘‹
      </h2>
      <h1
        class="mt-6 sm:mt-8 md:mt-10 text-pretty text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-bold tracking-tight text-gray-800 animate-fade-in animation-delay-200"
      >
        I'm <span
          id="typed-name"
          style={{ color: siteConfig.accentColor }}
          data-text={siteConfig.name}
        ></span><span id="name-cursor" class="typing-cursor">|</span>
      </h1>
      <p
        class="mt-4 sm:mt-6 md:mt-8 text-pretty text-base sm:text-lg md:text-xl/8 font-medium text-gray-600 animate-fade-in animation-delay-400"
      >
      <span
          id="typed-title"
          class="text-gray-600"
          data-text={JSON.stringify(siteConfig.title)}
        ></span><span class="typing-cursor">|</span>
      </p>
    </div>
  </div>
  <div
    class="absolute bottom-0 left-0 right-0 p-8 sm:p-12 md:p-24 flex gap-x-4 sm:gap-x-6 md:gap-x-8 text-gray-700 animate-fade-in animation-delay-600"
  >
    {
      siteConfig.social?.email && (
        <a
          href={`mailto:${siteConfig.social.email}`}
          aria-label="Email"
          class="transition-colors duration-300 hover:text-[var(--accent-color)]"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
            <path d="M3 7l9 6l9 -6" />
          </svg>
        </a>
      )
    }
    {
      siteConfig.social?.linkedin && (
        <a
          href={siteConfig.social.linkedin}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="LinkedIn"
          class="transition-colors duration-300 hover:text-[var(--accent-color)]"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8"
          >
            <>
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M8 11v5" />
              <path d="M8 8v.01" />
              <path d="M12 16v-5" />
              <path d="M16 16v-3a2 2 0 1 0 -4 0" />
              <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
            </>
          </svg>
        </a>
      )
    }
    {
      siteConfig.social?.twitter && (
        <a
          href={siteConfig.social.twitter}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Twitter"
          class="transition-colors duration-300 hover:text-[var(--accent-color)]"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8"
          >
            <>
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M4 4l11.733 16h4.267l-11.733 -16z" />
              <path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" />
            </>
          </svg>
        </a>
      )
    }
    {
      siteConfig.social?.github && (
        <a
          href={siteConfig.social.github}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="GitHub"
          class="transition-colors duration-300 hover:text-[var(--accent-color)]"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8"
          >
            <>
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
            </>
          </svg>
        </a>
      )
    }
  </div>
</div>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes blink {
    0%,
    49% {
      opacity: 1;
    }
    50%,
    100% {
      opacity: 0;
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.8s ease-out forwards;
    opacity: 0;
  }

  .animation-delay-200 {
    animation-delay: 0.2s;
  }

  .animation-delay-400 {
    animation-delay: 0.4s;
  }

  .animation-delay-600 {
    animation-delay: 0.6s;
  }

  .typing-cursor {
    animation: blink 1s step-end infinite;
    margin-left: 2px;
  }

  .typing-cursor.hide {
    opacity: 0;
    animation: none;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const typedNameElement = document.getElementById("typed-name");
    const typedTitleElement = document.getElementById("typed-title");
    const nameCursor = document.getElementById("name-cursor");

    if (!typedNameElement || !typedTitleElement || !nameCursor) return;

    const text1 = typedNameElement.getAttribute("data-text") || "";
    const titlesData = typedTitleElement.getAttribute("data-text") || "[]";
    const titles = JSON.parse(titlesData);
    const typingSpeed = 100; // milliseconds per character
    const deletingSpeed = 50; // milliseconds per character when deleting
    const pauseAfterTyping = 2000; // pause after typing a title
    const pauseAfterDeleting = 500; // pause after deleting a title

    let charIndex1 = 0;
    let currentTitleIndex = 0;

    // Wait for the fade-in animation to start (200ms delay)
    setTimeout(() => {
      // First, type the name
      const typeNextChar = () => {
        if (charIndex1 < text1.length) {
          typedNameElement.textContent += text1.charAt(charIndex1);
          charIndex1++;
          setTimeout(typeNextChar, typingSpeed);
        } else {
          // After name is typed, hide the name cursor and start the title loop
          nameCursor.classList.add("hide");
          setTimeout(typeTitleLoop, 200);
        }
      };

      const typeTitleLoop = () => {
        const currentTitle = titles[currentTitleIndex];
        let charIndex = 0;

        // Type the current title
        const typeTitle = () => {
          if (charIndex < currentTitle.length) {
            typedTitleElement.textContent += currentTitle.charAt(charIndex);
            charIndex++;
            setTimeout(typeTitle, typingSpeed);
          } else {
            // After typing complete, pause then start deleting
            setTimeout(deleteTitle, pauseAfterTyping);
          }
        };

        // Delete the current title
        const deleteTitle = () => {
          if (typedTitleElement.textContent.length > 0) {
            typedTitleElement.textContent = typedTitleElement.textContent.slice(0, -1);
            setTimeout(deleteTitle, deletingSpeed);
          } else {
            // Move to next title
            currentTitleIndex = (currentTitleIndex + 1) % titles.length;
            // After deleting complete, pause then start typing next title
            setTimeout(typeTitleLoop, pauseAfterDeleting);
          }
        };

        typeTitle();
      };

      typeNextChar();
    }, 200);
  });

  // Cursor-reactive symbol animation
  (() => {
    const heroSection = document.getElementById("hero");
    const symbolsGroup = document.getElementById("dynamic-symbols");
    if (!heroSection || !symbolsGroup) return;

    const symbols = ["</>", "{}", "=>", "[]", "<>", "()", "::", "==", "++", ";"];
    const accentColor = getComputedStyle(heroSection).getPropertyValue("--accent-color").trim();

    // Generate symbols across the viewport
    const symbolElements: Array<{
      element: SVGTextElement;
      baseX: number;
      baseY: number;
      baseRotation: number;
      baseFontSize: number;
    }> = [];

    const createSymbols = () => {
      const rect = heroSection.getBoundingClientRect();
      const cols = Math.ceil(rect.width / 150);
      const rows = Math.ceil(rect.height / 150);

      symbolsGroup.innerHTML = ""; // Clear existing
      symbolElements.length = 0;

      for (let i = 0; i < cols; i++) {
        for (let j = 0; j < rows; j++) {
          const x = (i * 150) + Math.random() * 100;
          const y = (j * 150) + Math.random() * 100;
          const symbol = symbols[Math.floor(Math.random() * symbols.length)];
          const rotation = Math.random() * 30 - 15;
          const fontSize = 18 + Math.random() * 8;

          const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
          text.setAttribute("x", x.toString());
          text.setAttribute("y", y.toString());
          text.setAttribute("fill", accentColor);
          text.setAttribute("font-family", "monospace");
          text.setAttribute("font-size", fontSize.toString());
          text.setAttribute("transform", `rotate(${rotation} ${x} ${y})`);
          text.setAttribute("class", "symbol-element");
          text.textContent = symbol;
          text.style.transition = "transform 0.3s ease-out, opacity 0.3s ease-out";

          symbolsGroup.appendChild(text);
          symbolElements.push({
            element: text,
            baseX: x,
            baseY: y,
            baseRotation: rotation,
            baseFontSize: fontSize
          });
        }
      }
    };

    createSymbols();

    // Track cursor and animate symbols
    let mouseX = 0;
    let mouseY = 0;
    let rafId: number;

    const updateSymbols = () => {
      symbolElements.forEach(({ element, baseX, baseY, baseRotation }) => {
        const dx = mouseX - baseX;
        const dy = mouseY - baseY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        const maxDistance = 200; // Influence radius

        if (distance < maxDistance) {
          const strength = 1 - (distance / maxDistance);
          const scale = 1 + (strength * 0.5); // Scale up to 1.5x
          const pushX = (dx / distance) * strength * -30; // Push away from cursor
          const pushY = (dy / distance) * strength * -30;
          const rotationOffset = strength * 20;

          element.style.transform = `
            translate(${pushX}px, ${pushY}px)
            rotate(${baseRotation + rotationOffset}deg)
            scale(${scale})
          `;
        } else {
          element.style.transform = `rotate(${baseRotation}deg) scale(1)`;
        }
      });
    };

    heroSection.addEventListener("mousemove", (e) => {
      const rect = heroSection.getBoundingClientRect();
      mouseX = e.clientX - rect.left;
      mouseY = e.clientY - rect.top;

      if (!rafId) {
        rafId = requestAnimationFrame(() => {
          updateSymbols();
          rafId = 0;
        });
      }
    });

    // Recreate symbols on resize
    let resizeTimeout: ReturnType<typeof setTimeout>;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(createSymbols, 250);
    });
  })();
</script>
